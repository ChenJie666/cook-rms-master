{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\cook-rms-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\cook-rms-master\\src\\views\\menu\\Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master\\src\\views\\menu\\Menu.vue","mtime":1591061914000},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQdWJsaXNoU3RhdHVzRW51bXMgZnJvbSAiLi4vLi4vZW51bXMvUHVibGlzaFN0YXR1c0VudW1zIjsKZXhwb3J0IGRlZmF1bHQgewogICAgICBuYW1lOiAiTWVudSIsCiAgICAgIGRhdGEoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIE1lbnVEYXRhTGlzdDogW10sCiAgICAgICAgICAgICAgbGltaXQ6IDEwLCAvLyDmr4/pobXmmL7npLrnmoTmnaHmlbAKICAgICAgICAgICAgICB0b3RhbDogMCwgLy8g5oC75p2h5pWwCiAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IDEsIC8vIOW9k+WJjemhtQogICAgICAgICAgICAgIG1lbnVOYW1lOiAnJywKICAgICAgICAgIH0KICAgICAgfSwKICAgICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmZpbmRDaGVja01lbnVMaXN0KCk7CiAgICAgIH0sCiAgICAgIG1ldGhvZHM6IHsKICAgICAgICAgIGZpbmRDaGVja01lbnVMaXN0KCkgewogICAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCgnL2FwaS9tZW51L2ZpbmRDaGVja01lbnVMaXN0Jyx7CiAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgICAgcGFnZTogdGhpcy5jdXJyZW50UGFnZSwKICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpbWl0LAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5tZW51TmFtZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkudGhlbihyZXM9PiB7CgogICAgICAgICAgICAgICAgICBpZihyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5kYXRhID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor6Xoj5zosLHkuI3lrZjlnKgiKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuTWVudURhdGFMaXN0ID0gcmVzLmRhdGEuZGF0YS5kYXRhTGlzdDsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS5kYXRhLnRvdGFsOwoKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLor7fmsYLmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLor7fmsYLlpLHotKUiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9LAogICAgICAgICAgLy8g5q+P6aG15pi+56S65p2h5pWwCiAgICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDmr4/pobUgJHt2YWx9IOadoWApOwogICAgICAgICAgICAgIC8vIOaUueWPmOavj+mhteaYvuekuueahOadoeaVsAogICAgICAgICAgICAgIHRoaXMubGltaXQgPSB2YWw7CiAgICAgICAgICAgICAgLy8g5rOo5oSPOiDlnKjmlLnlj5jmr4/pobXmmL7npLrnmoTmnaHmlbDml7Ys6KaB5bCG6aG156CB5pi+56S65Yiw56ys5LiA6aG1CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgICAgICAgICAgaWYgKHRoaXMubWVudU5hbWUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaCgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy5maW5kQ2hlY2tNZW51TGlzdCgpOwogICAgICAgICAgfSwKICAgICAgICAgIC8vIOaYvuekuuesrOWHoOmhtQogICAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdmFsOwogICAgICAgICAgICAgIGlmICh0aGlzLm1lbnVOYW1lICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2goKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5maW5kQ2hlY2tNZW51TGlzdCgpOwogICAgICAgICAgfSwKICAgICAgICAgIGhhbmRsZUVkaXQoaWQpIHsKICAgICAgICAgICAgICAvLyDmn6Xor6Loj5zosLHor6bmg4Ug5bm25a+55a6D6L+b6KGM5pu05paw5pON5L2cCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICIvbWVudS9kZXRhaWwiLAogICAgICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCwgcm93KTsKICAgICAgICAgIH0sCiAgICAgICAgICBoYW5kbGVEZWxldGUoaWQpIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCwgcm93KTsKICAgICAgICAgICAgICAvLyDliKDpmaTmlrnms5Ug6ZyA6KaB5Lyg5YWl6I+c6LCxSWQKICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKCLnoa7orqTopoHliKDpmaTor6XorrDlvZXlkJc/IiwgIuaPkOekuiIsIHsKICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgICAgICAgfSkudGhlbigoKT0+ewogICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcy5kZWxldGUoIi9hcGkvbWVudS9kZWxldGVNZW51IiwgewogICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUlkOiBpZAogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZENoZWNrTWVudUxpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoIuWIoOmZpOWksei0pe+8jOivt+WIt+aWsOWQjumHjeivlSEiLCAi5o+Q56S6Iik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSkKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkTWVudURhdGFMaXN0KCkgewogICAgICAgICAgICAgIHRoaXMuZmluZENoZWNrTWVudUxpc3QoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBzZWFyY2goKSB7CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgICAgICAgICAgdGhpcy5maW5kQ2hlY2tNZW51TGlzdCgpOwogICAgICAgICAgfSwKICAgICAgICAgIGFkZE1lbnUoKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIua3u+WKoOiPnOiwsSIpOwogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiIvbWVudS9hZGQifSkKICAgICAgICAgIH0sCiAgICAgICAgICBpc1B1Ymxpc2hTdGF0dXModmFsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFB1Ymxpc2hTdGF0dXNFbnVtcy5pc1B1Ymxpc2hTdGF0dXModmFsLnB1Ymxpc2hTdGF0dXMpCiAgICAgICAgICB9CiAgICAgIH0KICB9Cg=="},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menu.vue","sourceRoot":"src/views/menu","sourcesContent":["<template>\n  <el-card class=\"box-card\">\n    <my-bread level1=\"菜谱管理\" level2=\"菜谱列表\"></my-bread>\n    <el-row class=\"searchRow\">\n      <el-col :span=\"10\">\n        <div class=\"grid-content bg-purple\">\n          <el-button size=\"medium\" type=\"success\" @click=\"addMenu()\">添加菜谱</el-button>\n          <el-button size=\"medium\" type=\"info\" @click=\"batchAddMenu = true\">批量发布</el-button>\n          <el-button size=\"medium\" type=\"warning\" @click=\"batchSoldOut = true\">批量下架</el-button>\n          <el-button size=\"medium\" type=\"danger\" @click=\"batchDeleteMenu = true\">批量删除</el-button>\n        </div>\n      </el-col>\n      <el-col :span=\"4\" :offset=\"8\">\n        <div class=\"grid-content bg-purple\">\n          <el-input placeholder=\"搜索菜谱\"\n                    v-model=\"menuName\"\n                    clearable\n                    @clear=\"loadMenuDataList()\">\n            <el-button slot=\"append\"  icon=\"el-icon-search\" @click=\"search()\"></el-button>\n          </el-input>\n        </div>\n      </el-col>\n    </el-row>\n\n    <el-table\n            :data=\"MenuDataList\"\n            style=\"width: 100%\"\n            border>\n      <el-table-column\n              type=\"selection\"\n              min-width=\"10\">\n      </el-table-column>\n      <el-table-column\n              align=\"center\"\n              label=\"菜谱名称\"\n              min-width=\"20\"\n              prop=\"name\">\n      </el-table-column>\n      <el-table-column\n              align=\"center\"\n              label=\"头图\"\n              min-width=\"20\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.menuUrl\" alt=\"图片消失\" width=\"50\" height=\"50\">\n        </template>\n      </el-table-column>\n      <el-table-column\n              align=\"center\"\n              label=\"菜谱Id\"\n              min-width=\"10\"\n              prop=\"id\">\n      </el-table-column>\n      <el-table-column\n              align=\"center\"\n              label=\"菜谱属性\"\n              min-width=\"10\"\n              prop=\"isOfficial\">\n      </el-table-column>\n      <el-table-column\n              align=\"center\"\n              label=\"发布状态\"\n              min-width=\"10\"\n              prop=\"publishStatus\"\n              :formatter=\"isPublishStatus\">\n      </el-table-column>\n      <el-table-column\n              align=\"center\"\n              label=\"上传用户\"\n              min-width=\"10\"\n              prop=\"authorName\">\n      </el-table-column>\n      <el-table-column\n              align=\"left\"\n              label=\"操作\"\n              min-width=\"10\">\n        <template slot-scope=\"scope\">\n          <el-button\n                  size=\"mini\"\n                  @click=\"handleEdit(scope.row.id)\">编辑</el-button>\n          <el-button\n                  size=\"mini\"\n                  type=\"danger\"\n                  @click=\"handleDelete(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"r_page\">\n      <el-pagination\n              background\n              @size-change=\"handleSizeChange\"\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"currentPage\"\n              :page-sizes=\"[10,20,30,50,100,200,500]\"\n              :page-size=\"limit\"\n              layout=\"total, sizes, prev, pager, next, jumper\"\n              :total=\"total\"\n      ></el-pagination>\n    </div>\n  </el-card>\n</template>\n\n<script>\n  import PublishStatusEnums from \"../../enums/PublishStatusEnums\";\n  export default {\n        name: \"Menu\",\n        data() {\n            return {\n                MenuDataList: [],\n                limit: 10, // 每页显示的条数\n                total: 0, // 总条数\n                currentPage: 1, // 当前页\n                menuName: '',\n            }\n        },\n        created() {\n          this.findCheckMenuList();\n        },\n        methods: {\n            findCheckMenuList() {\n                this.$axios.get('/api/menu/findCheckMenuList',{\n                    params: {\n                        page: this.currentPage,\n                        pageSize: this.limit,\n                        name: this.menuName\n                    }\n                }).then(res=> {\n\n                    if(res.status === 200) {\n                        if (res.data.data == null) {\n                            this.$message.error(\"该菜谱不存在\");\n                        }\n                        this.MenuDataList = res.data.data.dataList;\n                        this.total = res.data.data.total;\n\n                        console.log(\"请求成功\");\n                    } else {\n                        console.log(\"请求失败\");\n                    }\n                })\n            },\n            // 每页显示条数\n            handleSizeChange(val) {\n                console.log(`每页 ${val} 条`);\n                // 改变每页显示的条数\n                this.limit = val;\n                // 注意: 在改变每页显示的条数时,要将页码显示到第一页\n                this.currentPage = 1;\n                if (this.menuName != null) {\n                    this.search();\n                }\n\n                this.findCheckMenuList();\n            },\n            // 显示第几页\n            handleCurrentChange(val) {\n                console.log(`当前页: ${val}`);\n                this.currentPage = val;\n                if (this.menuName != null) {\n                    this.search();\n                }\n                this.findCheckMenuList();\n            },\n            handleEdit(id) {\n                // 查询菜谱详情 并对它进行更新操作\n                this.$router.push({path: \"/menu/detail\",\n                    query: {\n                        id: id\n                    }\n                })\n\n                // console.log(index, row);\n            },\n            handleDelete(id) {\n                // console.log(index, row);\n                // 删除方法 需要传入菜谱Id\n                this.$confirm(\"确认要删除该记录吗?\", \"提示\", {\n                    confirmButtonText: \"确定\",\n                    cancelButtonText: \"取消\",\n                    type: \"warning\"\n                }).then(()=>{\n                    this.$axios.delete(\"/api/menu/deleteMenu\", {\n                        params: {\n                            menuId: id\n                        }\n                    }).then(res => {\n                        if (res.data.status === 200) {\n                            this.$message.success(\"删除成功\");\n                            this.findCheckMenuList();\n                        } else {\n                            this.$alert(\"删除失败，请刷新后重试!\", \"提示\");\n                        }\n                    })\n                })\n            },\n            loadMenuDataList() {\n                this.findCheckMenuList();\n            },\n            search() {\n                this.currentPage = 1;\n                this.findCheckMenuList();\n            },\n            addMenu() {\n                console.log(\"添加菜谱\");\n                this.$router.push({path:\"/menu/add\"})\n            },\n            isPublishStatus(val) {\n                return PublishStatusEnums.isPublishStatus(val.publishStatus)\n            }\n        }\n    }\n</script>\n\n<style scoped>\n  .box-card {\n    height: 100%;\n  }\n  .searchRow {\n    margin: 30px 0px 30px 0px;\n  }\n\n  .r_page {\n    float: right;\n  }\n</style>\n"]}]}
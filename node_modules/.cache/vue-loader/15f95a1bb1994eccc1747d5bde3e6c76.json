{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\src\\views\\application\\Weather.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\src\\views\\application\\Weather.vue","mtime":1596101105278},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595921340657},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\node_modules\\babel-loader\\lib\\index.js","mtime":1595921337356},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1595921340657},{"path":"C:\\Users\\Administrator\\Desktop\\cook-rms-master(2)\\node_modules\\vue-loader\\lib\\index.js","mtime":1595921369308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB3ZWF0aGVyIGZyb20gIi4uLy4uL2FwaS9hcHBsaWNhdGlvbi93ZWF0aGVyIgppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCIKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICIiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gKHsKICAgICAgICAgICAgcGFnZUN1cnJlbnQ6IDEsCiAgICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIHBhZ2VzOiAwLAogICAgICAgICAgICByZWNvcmRzOiBbXSwKICAgICAgICAgICAgd2VhdGhlckRheTogIiIsCiAgICAgICAgICAgIHNlYXJjaEZhY3RvcjogewogICAgICAgICAgICAgICAgc2VhcmNoRGF0ZTogIiIsCiAgICAgICAgICAgICAgICBzZWFyY2hDaXR5OiAiIgogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyBjbG9ja1ZPOiB7CiAgICAgICAgICAgIC8vICAgICBpZDogbnVsbCwKICAgICAgICAgICAgLy8gICAgIGNpdHlDb2RlOiAiIiwgLy/ln47luIJpZAogICAgICAgICAgICAvLyAgICAgY2l0eU5hbWU6ICIiLCAvL+WfjuW4guWQjQogICAgICAgICAgICAvLyAgICAgd2VhdGhlckRheTogIiIsIC8v5pel5pyfCiAgICAgICAgICAgIC8vICAgICB0ZW1wOiBudWxsLCAvL+W9k+WJjeawlOa4qQogICAgICAgICAgICAvLyAgICAgaGlnaFRlbXA6IG51bGwsIC8v5pyA6auY5rip5bqmCiAgICAgICAgICAgIC8vICAgICBsb3dUZW1wOiBudWxsLCAvL+acgOS9jua4qeW6pgogICAgICAgICAgICAvLyAgICAgd2VhdGhlcklkOiBudWxsLCAvL+WkqeawlOW6j+WPtwogICAgICAgICAgICAvLyAgICAgZGVzYzogIiIgLy/lpKnmsJTor7TmmI4KICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgcGlja2VyT3B0aW9uczogewogICAgICAgICAgICAgICAgZGlzYWJsZWREYXRlKHRpbWUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGltZS5nZXRUaW1lKCkgPiBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNob3J0Y3V0czogW3sKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn5LuK5aSpJywKICAgICAgICAgICAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgewogICAgICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBuZXcgRGF0ZSgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+aYqOWkqScsCiAgICAgICAgICAgICAgICAgICAgb25DbGljayhwaWNrZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQpOwogICAgICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBkYXRlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+S4gOWRqOWJjScsCiAgICAgICAgICAgICAgICAgICAgb25DbGljayhwaWNrZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQgKiA3KTsKICAgICAgICAgICAgICAgICAgICAgICAgcGlja2VyLiRlbWl0KCdwaWNrJywgZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgfSwKICAgICAgICB9KQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGYWN0b3Iud2VhdGhlckRheSA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpOwogICAgICAgIHRoaXMuZ2V0V2VhdGhlcigxKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBnZXRXZWF0aGVyKHBhZ2VDdXJyZW50KSB7CiAgICAgICAgICAgIHRoaXMucGFnZUN1cnJlbnQgPSBwYWdlQ3VycmVudDsKICAgICAgICAgICAgY29uc29sZS5sb2coIioqKnNlYXJjaEZhY3RvciIgKyB0aGlzLnNlYXJjaEZhY3Rvcik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIqKipzZWFyY2hEYXRlIiArIHRoaXMuc2VhcmNoRmFjdG9yLnNlYXJjaERhdGUpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiKioqc2VhcmNoQ2l0eSIgKyB0aGlzLnNlYXJjaEZhY3Rvci5zZWFyY2hDaXR5KTsKICAgICAgICAgICAgd2VhdGhlci5nZXRXZWF0aGVyTGlzdChwYWdlQ3VycmVudCwgdGhpcy5wYWdlU2l6ZSwgdGhpcy5zZWFyY2hGYWN0b3IpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3JkcyA9IGRhdGEucmVjb3JkczsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VzID0gZGF0YS5wYWdlczsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBkYXRhLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplID0gZGF0YS5zaXplOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFkZFdlYXRoZXIoKSB7CiAgICAgICAgICAgIHdlYXRoZXIuYWRkV2VhdGhlcigpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRXZWF0aGVyKHRoaXMucGFnZUN1cnJlbnQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDlvZPliY3ml6XmnJ/ln47luILlpKnmsJTmiJDlip8hIgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGRlbGV0ZUJ5SWQoaWQpIHsKICAgICAgICAgICAgd2VhdGhlci5kZWxldGVXZWF0aGVyKGlkKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0V2VhdGhlcih0aGlzLnBhZ2VDdXJyZW50KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5aSp5rCU6K6w5b2V5oiQ5YqfISIKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8v5YiG6aG15Yqf6IO9CiAgICAgICAgaGFuZGxlU2l6ZUNoYW5nZShwYWdlU2l6ZSkgewogICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgICAgICAgIHRoaXMuZ2V0V2VhdGhlcih0aGlzLnBhZ2VDdXJyZW50KQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlQ3VycmVudCkgewogICAgICAgICAgICB0aGlzLnBhZ2VDdXJyZW50ID0gcGFnZUN1cnJlbnQ7CiAgICAgICAgICAgIHRoaXMuZ2V0V2VhdGhlcih0aGlzLnBhZ2VDdXJyZW50KQogICAgICAgIH0sCiAgICAgICAgLy/muIXnqbrmn6Xor6LmnaHku7YKICAgICAgICBjbGVhclNlYXJjaEZhY3RvcigpewogICAgICAgICAgICB0aGlzLnNlYXJjaEZhY3RvciA9IHtzZWFyY2hEYXRlOiAiIiwgc2VhcmNoQ2l0eTogIiJ9OwogICAgICAgICAgICB0aGlzLmdldFdlYXRoZXIoMSkKICAgICAgICB9CiAgICB9Cn0KCg=="},{"version":3,"sources":["Weather.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Weather.vue","sourceRoot":"src/views/application","sourcesContent":["<template>\r\n    <div class=\"weather\">\r\n\r\n        <el-button type=\"primary\" @click=\"addWeather\">添加当天天气</el-button>\r\n\r\n        <div style=\"margin-top: 20px;\">\r\n            <el-button type=\"success\" @click=\"getWeather(1,searchFactor)\">查询天气</el-button>\r\n            <el-button type=\"info\" @click=\"this.clearSearchFactor\">清空条件</el-button>\r\n            <el-date-picker style=\"width: 150px\"\r\n                            v-model=\"searchFactor.searchDate\"\r\n                            align=\"right\"\r\n                            type=\"date\"\r\n                            value-format=\"yyyy-MM-dd\"\r\n                            placeholder=\"选择日期\"\r\n                            :picker-options=\"pickerOptions\">\r\n            </el-date-picker>\r\n\r\n            <el-input style=\"margin-right: 10px;width: 150px\" placeholder=\"输入城市\" v-model=\"searchFactor.searchCity\" clearable/>\r\n\r\n        </div>\r\n\r\n\r\n        <div style=\"margin: 10px;\"></div>\r\n\r\n        <el-table :data=\"records\" style=\"width: 100%\" border>\r\n            <el-table-column label=\"日期\" prop=\"weatherDay\"/>\r\n            <el-table-column fixed label=\"城市id\" prop=\"cityCode\"/>\r\n            <el-table-column fixed label=\"城市名\" prop=\"cityName\"/>\r\n            <el-table-column label=\"当前气温\" prop=\"temp\"/>\r\n            <el-table-column label=\"最高温度\" prop=\"highTemp\"/>\r\n            <el-table-column label=\"最低温度\" prop=\"lowTemp\"/>\r\n            <el-table-column label=\"天气序号\" prop=\"weatherId\"/>\r\n            <el-table-column label=\"天气说明\" prop=\"desc\"/>\r\n            <el-table-column label=\"创建时间\" prop=\"createTime\"/>\r\n            <el-table-column fixed=\"right\" label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button @click=\"deleteById(scope.row.id)\" type=\"text\" size=\"small\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 分页功能 -->\r\n        <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"pageCurrent\"\r\n                :page-sizes=\"[10,20,50,100]\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n        </el-pagination>\r\n\r\n    </div>\r\n</template>\r\n\r\n<style scoped src=\"../../assets/css/application.css\"/>\r\n\r\n<script>\r\n    import weather from \"../../api/application/weather\"\r\n    import moment from \"moment\"\r\n\r\n    export default {\r\n        name: \"\",\r\n        data() {\r\n            return ({\r\n                pageCurrent: 1,\r\n                pageSize: 10,\r\n                total: 0,\r\n                pages: 0,\r\n                records: [],\r\n                weatherDay: \"\",\r\n                searchFactor: {\r\n                    searchDate: \"\",\r\n                    searchCity: \"\"\r\n                },\r\n                // clockVO: {\r\n                //     id: null,\r\n                //     cityCode: \"\", //城市id\r\n                //     cityName: \"\", //城市名\r\n                //     weatherDay: \"\", //日期\r\n                //     temp: null, //当前气温\r\n                //     highTemp: null, //最高温度\r\n                //     lowTemp: null, //最低温度\r\n                //     weatherId: null, //天气序号\r\n                //     desc: \"\" //天气说明\r\n                // },\r\n                pickerOptions: {\r\n                    disabledDate(time) {\r\n                        return time.getTime() > Date.now();\r\n                    },\r\n                    shortcuts: [{\r\n                        text: '今天',\r\n                        onClick(picker) {\r\n                            picker.$emit('pick', new Date());\r\n                        }\r\n                    }, {\r\n                        text: '昨天',\r\n                        onClick(picker) {\r\n                            const date = new Date();\r\n                            date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n                            picker.$emit('pick', date);\r\n                        }\r\n                    }, {\r\n                        text: '一周前',\r\n                        onClick(picker) {\r\n                            const date = new Date();\r\n                            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n                            picker.$emit('pick', date);\r\n                        }\r\n                    }]\r\n                },\r\n            })\r\n        },\r\n        created() {\r\n            this.searchFactor.weatherDay = moment().format('YYYY-MM-DD');\r\n            this.getWeather(1)\r\n        },\r\n        methods: {\r\n            getWeather(pageCurrent) {\r\n                this.pageCurrent = pageCurrent;\r\n                console.log(\"***searchFactor\" + this.searchFactor);\r\n                console.log(\"***searchDate\" + this.searchFactor.searchDate);\r\n                console.log(\"***searchCity\" + this.searchFactor.searchCity);\r\n                weather.getWeatherList(pageCurrent, this.pageSize, this.searchFactor)\r\n                    .then(response => {\r\n                        let data = response.data;\r\n                        this.records = data.records;\r\n                        this.total = data.total;\r\n                        this.pages = data.pages;\r\n                        this.current = data.current;\r\n                        this.size = data.size;\r\n                    }).catch(error => {\r\n                    console.error(error)\r\n                })\r\n            },\r\n            addWeather() {\r\n                weather.addWeather()\r\n                    .then(response => {\r\n                        this.getWeather(this.pageCurrent);\r\n                        this.$message({\r\n                            type: \"success\",\r\n                            message: \"添加当前日期城市天气成功!\"\r\n                        })\r\n                    }).catch(error => {\r\n                    console.log(error)\r\n                })\r\n            },\r\n            deleteById(id) {\r\n                weather.deleteWeather(id)\r\n                    .then(response => {\r\n                        this.getWeather(this.pageCurrent);\r\n                        this.$message({\r\n                            type: \"success\",\r\n                            message: \"删除天气记录成功!\"\r\n                        })\r\n                    })\r\n            },\r\n            //分页功能\r\n            handleSizeChange(pageSize) {\r\n                this.pageSize = pageSize;\r\n                this.getWeather(this.pageCurrent)\r\n            },\r\n            handleCurrentChange(pageCurrent) {\r\n                this.pageCurrent = pageCurrent;\r\n                this.getWeather(this.pageCurrent)\r\n            },\r\n            //清空查询条件\r\n            clearSearchFactor(){\r\n                this.searchFactor = {searchDate: \"\", searchCity: \"\"};\r\n                this.getWeather(1)\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n"]}]}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aaea45f6"],{"6d4d":function(e,t,a){},"8f85":function(e,t,a){"use strict";var r=a("6d4d"),l=a.n(r);l.a},afd6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weather"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-cloudy"}),e._v(" 应用云")]),a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-sunny"}),e._v(" 天气管理")])],1),a("div",{staticClass:"container"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.addWeather}},[e._v("添加当天天气")]),a("el-button",{staticStyle:{"margin-left":"70px"},attrs:{type:"success"},on:{click:function(t){return e.getWeather(1,e.searchFactor)}}},[e._v("查询天气")]),a("el-button",{attrs:{type:"info"},on:{click:this.clearSearchFactor}},[e._v("清空条件")]),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.searchFactor.searchDate,callback:function(t){e.$set(e.searchFactor,"searchDate",t)},expression:"searchFactor.searchDate"}}),a("el-input",{staticStyle:{"margin-right":"10px",width:"150px"},attrs:{placeholder:"输入城市",clearable:""},model:{value:e.searchFactor.searchCity,callback:function(t){e.$set(e.searchFactor,"searchCity",t)},expression:"searchFactor.searchCity"}})],1),a("el-dialog",{attrs:{title:"更新天气记录",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.weatherVO}},[a("el-form-item",{attrs:{label:"城市id",prop:"region","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.weatherVO.cityCode,callback:function(t){e.$set(e.weatherVO,"cityCode",t)},expression:"weatherVO.cityCode"}})],1),a("el-form-item",{attrs:{label:"城市名称",prop:"region","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.weatherVO.cityName,callback:function(t){e.$set(e.weatherVO,"cityName",t)},expression:"weatherVO.cityName"}})],1),a("el-form-item",{attrs:{label:"天气日期","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"date",align:"right","default-value":e.getDate,"value-format":"yyyy-MM-dd"},model:{value:e.weatherVO.weatherDay,callback:function(t){e.$set(e.weatherVO,"weatherDay",t)},expression:"weatherVO.weatherDay"}})],1),a("el-form-item",{attrs:{label:"当前气温",prop:"region","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.weatherVO.temp,callback:function(t){e.$set(e.weatherVO,"temp",t)},expression:"weatherVO.temp"}})],1),a("el-form-item",{attrs:{label:"最高气温",prop:"region","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.weatherVO.highTemp,callback:function(t){e.$set(e.weatherVO,"highTemp",t)},expression:"weatherVO.highTemp"}})],1),a("el-form-item",{attrs:{label:"最低气温",prop:"region","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.weatherVO.lowTemp,callback:function(t){e.$set(e.weatherVO,"lowTemp",t)},expression:"weatherVO.lowTemp"}})],1),a("el-form-item",{attrs:{label:"天气描述",prop:"region","label-width":"100px"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"选择天气"},model:{value:e.weatherVO.weatherId,callback:function(t){e.$set(e.weatherVO,"weatherId",t)},expression:"weatherVO.weatherId"}},[a("el-option",{attrs:{value:"1",label:"晴"}}),a("el-option",{attrs:{value:"2",label:"多云"}}),a("el-option",{attrs:{value:"3",label:"雨"}}),a("el-option",{attrs:{value:"4",label:"雪"}}),a("el-option",{attrs:{value:"5",label:"阴"}}),a("el-option",{attrs:{value:"0",label:"未知"}})],1)],1),a("el-form-item",{attrs:{label:"天气序号",prop:"region","label-width":"100px"}},[a("el-select",{attrs:{disabled:""},model:{value:e.weatherVO.weatherId,callback:function(t){e.$set(e.weatherVO,"weatherId",t)},expression:"weatherVO.weatherId"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateWeather}},[e._v("确 定")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.records,"header-cell-style":{background:"#F6F7FB"},border:""}},[a("el-table-column",{attrs:{align:"center",label:"日期",prop:"weatherDay"}}),a("el-table-column",{attrs:{align:"center",fixed:"",label:"城市id",prop:"cityCode"}}),a("el-table-column",{attrs:{align:"center",fixed:"",label:"城市名",prop:"cityName"}}),a("el-table-column",{attrs:{align:"center",label:"当前气温",prop:"temp"}}),a("el-table-column",{attrs:{align:"center",label:"最高温度",prop:"highTemp"}}),a("el-table-column",{attrs:{align:"center",label:"最低温度",prop:"lowTemp"}}),a("el-table-column",{attrs:{align:"center",label:"天气序号",prop:"weatherId"}}),a("el-table-column",{attrs:{align:"center",label:"天气说明",prop:"desc"}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.setObj(t.row.id)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteById(t.row.id)}}},[e._v("删除 ")])]}}])})],1),a("br"),a("el-pagination",{attrs:{"current-page":e.pageCurrent,"page-sizes":[15,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],i=(a("4de4"),a("99af"),a("b775")),c={getWeatherList:function(e,t,a){return Object(i["a"])({url:"/application/weather/getWeatherList/".concat(e,"/").concat(t),method:"post",data:a})},addWeather:function(){return Object(i["a"])({url:"/application/weather/getnow",method:"get"})},updateWeather:function(e){return Object(i["a"])({url:"/application/weather/updateWeather",method:"post",data:e})},deleteWeather:function(e){return Object(i["a"])({url:"/application/weather/deleteWeather/".concat(e),method:"delete"})}},o=a("c1df"),n=a.n(o),s={name:"",data:function(){return{pageCurrent:1,pageSize:15,total:0,pages:0,records:[],weatherDay:"",searchFactor:{searchDate:"",searchCity:""},weatherVO:{id:null,cityCode:"",cityName:"",weatherDay:"",temp:null,highTemp:null,lowTemp:null,weatherId:null,desc:""},dialogFormVisible:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()+864e5},shortcuts:[{text:"明天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}}]}}},created:function(){this.searchFactor.weatherDay=n()().format("YYYY-MM-DD"),this.getWeather(1)},methods:{getWeather:function(e){var t=this;this.pageCurrent=e,console.log("***searchFactor"+this.searchFactor),console.log("***searchDate"+this.searchFactor.searchDate),console.log("***searchCity"+this.searchFactor.searchCity),c.getWeatherList(e,this.pageSize,this.searchFactor).then((function(e){var a=e.data;t.records=a.records,t.total=a.total,t.pages=a.pages,t.current=a.current,t.size=a.size})).catch((function(e){console.error(e)}))},setObj:function(e){var t=this.records.filter((function(t){return t.id===e})),a=t.pop();this.weatherVO.id=a.id,this.weatherVO.cityCode=a.cityCode,this.weatherVO.cityName=a.cityName,this.weatherVO.weatherDay=a.weatherDay,this.weatherVO.temp=a.temp,this.weatherVO.highTemp=a.highTemp,this.weatherVO.lowTemp=a.lowTemp,this.weatherVO.weatherId=a.weatherId+"",this.dialogFormVisible=!0},addWeather:function(){var e=this;c.addWeather().then((function(t){e.getWeather(e.pageCurrent),e.$message({type:"success",message:"添加当前日期城市天气成功!"})})).catch((function(e){console.log(e)}))},updateWeather:function(){var e=this;c.updateWeather(this.weatherVO).then((function(t){e.getWeather(e.pageCurrent),e.$message({type:"success",message:"更新天气记录成功!"}),e.dialogFormVisible=!1})).catch((function(e){console.log(e)}))},deleteById:function(e){var t=this;c.deleteWeather(e).then((function(e){t.getWeather(t.pageCurrent),t.$message({type:"success",message:"删除天气记录成功!"})})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.pageSize=e,this.getWeather(this.pageCurrent)},handleCurrentChange:function(e){this.pageCurrent=e,this.getWeather(this.pageCurrent)},clearSearchFactor:function(){this.searchFactor={searchDate:"",searchCity:""},this.getWeather(1)}},computed:{getDate:function(){""===this.weatherVO.weatherDay&&(this.weatherVO.weatherDay=n()().format("YYYY-MM-DD"))}},watch:{"weatherVO.weatherId":function(){switch(this.weatherVO.weatherId){case"1":this.weatherVO.desc="晴";break;case"2":this.weatherVO.desc="多云";break;case"3":this.weatherVO.desc="雨";break;case"4":this.weatherVO.desc="雪";break;default:this.weatherVO.desc="阴";break}}}},h=s,p=(a("8f85"),a("2877")),d=Object(p["a"])(h,r,l,!1,null,"c279981c",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-aaea45f6.223a6308.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6dad67e"],{"1dde":function(e,t,n){var o=n("d039"),l=n("b622"),r=n("2d00"),a=l("species");e.exports=function(e){return r>=51||!o((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,n){var o=n("861d"),l=n("e8b5"),r=n("b622"),a=r("species");e.exports=function(e,t){var n;return l(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!l(n.prototype)?o(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},8418:function(e,t,n){"use strict";var o=n("c04e"),l=n("9bf2"),r=n("5c6c");e.exports=function(e,t,n){var a=o(t);a in e?l.f(e,a,r(0,n)):e[a]=n}},a434:function(e,t,n){"use strict";var o=n("23e7"),l=n("23cb"),r=n("a691"),a=n("50c4"),i=n("7b0b"),u=n("65f0"),s=n("8418"),c=n("1dde"),f=n("ae40"),d=c("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var n,o,c,f,d,p,w=i(this),M=a(w.length),x=l(e,M),y=arguments.length;if(0===y?n=o=0:1===y?(n=0,o=M-x):(n=y-2,o=h(m(r(t),0),M-x)),M+n-o>b)throw TypeError(v);for(c=u(w,o),f=0;f<o;f++)d=x+f,d in w&&s(c,f,w[d]);if(c.length=o,n<o){for(f=x;f<M-o;f++)d=f+o,p=f+n,d in w?w[p]=w[d]:delete w[p];for(f=M;f>M-o+n;f--)delete w[f-1]}else if(n>o)for(f=M-o;f>x;f--)d=f+o-1,p=f+n-1,d in w?w[p]=w[d]:delete w[p];for(f=0;f<n;f++)w[f+x]=arguments[f+2];return w.length=M-o+n,c}})},ae40:function(e,t,n){var o=n("83ab"),l=n("d039"),r=n("5135"),a=Object.defineProperty,i={},u=function(e){throw e};e.exports=function(e,t){if(r(i,e))return i[e];t||(t={});var n=[][e],s=!!r(t,"ACCESSORS")&&t.ACCESSORS,c=r(t,0)?t[0]:u,f=r(t,1)?t[1]:void 0;return i[e]=!!n&&!l((function(){if(s&&!o)return!0;var e={length:-1};s?a(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,c,f)}))}},e8b5:function(e,t,n){var o=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}},eb82:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"menuForm",attrs:{model:e.formMenu}},[n("el-form-item",{attrs:{label:"菜谱名称:","label-width":"100px"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入菜谱名称"},model:{value:e.formMenu.name,callback:function(t){e.$set(e.formMenu,"name",t)},expression:"formMenu.name"}})],1),n("el-form-item",{attrs:{label:"菜谱难度:","label-width":"100px"}},[n("el-select",{attrs:{placeholder:"请选择菜谱难度"},model:{value:e.formMenu.deg,callback:function(t){e.$set(e.formMenu,"deg",t)},expression:"formMenu.deg"}},[n("el-option",{attrs:{label:"1",value:"1"}}),n("el-option",{attrs:{label:"2",value:"2"}}),n("el-option",{attrs:{label:"3",value:"3"}}),n("el-option",{attrs:{label:"4",value:"4"}}),n("el-option",{attrs:{label:"5",value:"5"}})],1)],1),n("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"预计用时:","label-width":"100px"}},[n("el-input",{model:{value:e.formMenu.tm,callback:function(t){e.$set(e.formMenu,"tm",t)},expression:"formMenu.tm"}})],1),n("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"菜谱头图:","label-width":"100px"}},[n("el-input",{model:{value:e.formMenu.menuUrl,callback:function(t){e.$set(e.formMenu,"menuUrl",t)},expression:"formMenu.menuUrl"}})],1),n("el-form-item",{attrs:{label:"食材清单:","label-width":"100px"}},[n("el-table",{staticStyle:{width:"50%"},attrs:{border:"",data:e.fl1}},[n("el-table-column",{attrs:{fixed:"left",label:"食材名称","min-width":"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{label:"分量","min-width":"20"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.weight,callback:function(n){e.$set(t.row,"weight",n)},expression:"scope.row.weight"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteFl(t.$index,e.formMenu.fl)}}},[e._v(" 移除 ")])]}}])})],1),n("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.addFlListRow()}}},[e._v("添加一行")])],1),n("el-form-item",{attrs:{"label-width":"100px"}},[n("el-input",{attrs:{type:"hidden"},model:{value:e.formMenu.fl,callback:function(t){e.$set(e.formMenu,"fl",t)},expression:"formMenu.fl"}})],1),n("el-form-item",{attrs:{label:"图文步骤:","label-width":"100px"}},[n("el-table",{staticStyle:{width:"70%"},attrs:{border:"",data:e.formMenu.cookSteps}},[n("el-table-column",{attrs:{fixed:"left",label:"图片url","min-width":"20"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.stepUrl,callback:function(n){e.$set(t.row,"stepUrl",n)},expression:"scope.row.stepUrl"}})]}}])}),n("el-table-column",{attrs:{label:"图片说明","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.description,callback:function(n){e.$set(t.row,"description",n)},expression:"scope.row.description"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"10"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),e.deleteCookStep(t.$index,e.formMenu.cookSteps)}}},[e._v(" 移除 ")])]}}])})],1),n("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.addCookStepsListRow()}}},[e._v("添加一行")])],1),n("el-form-item",{attrs:{label:"小贴士:","label-width":"100px"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入小贴士",type:"textarea",maxlength:"200","show-word-limit":"",clearable:""},model:{value:e.formMenu.tip,callback:function(t){e.$set(e.formMenu,"tip",t)},expression:"formMenu.tip"}})],1),n("el-form-item",{attrs:{"label-width":"100px"}},[n("el-checkbox",{model:{value:e.formMenu.isOfficial,callback:function(t){e.$set(e.formMenu,"isOfficial",t)},expression:"formMenu.isOfficial"}},[e._v("是否发布为官方菜谱")])],1),n("el-form-item",{attrs:{"label-width":"100px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateMenuPublishForm()}}},[e._v("发布")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateMenuForm()}}},[e._v("上传")])],1)],1)],1)},l=[],r=(n("a434"),{name:"MenuDetail",data:function(){return{menuId:null,formMenu:{},fl1:[]}},created:function(){this.getMenuId()},mounted:function(){this.getMenuDetail()},methods:{getMenuId:function(){this.menuId=this.$route.query.id},addFlListRow:function(){this.fl1.push({name:"",weight:""})},addCookStepsListRow:function(){this.formMenu.cookSteps.push({stepUrl:"",description:""})},deleteFl:function(e,t){t.splice(e,1)},deleteCookStep:function(e,t){t.splice(e,1)},getMenuDetail:function(){var e=this;this.$axios.get("/api/menu-anon/getMenuDetail",{params:{menuId:this.menuId,userId:""}}).then((function(t){if(200===t.status){console.log(t.data.data),e.formMenu=t.data.data;var n=JSON.parse(t.data.data.fl);for(var o in n)e.fl1.push(n[o])}else e.$alert("查询菜谱详情失败")}))},updateMenuPublishForm:function(){var e=this;console.log("发布"),this.$refs.menuForm.validate((function(t){if(t){e.formMenu.publishStatus=2,e.formMenu.fl=JSON.stringify(e.fl1);var n=JSON.stringify(e.formMenu),o={headers:{"Content-Type":"application/json;charset=UTF-8"}},l="/api/menu/updateMenu";e.$axios.post(l,n,o).then((function(t){if(200!==t.status)return console.log("error submit!!"),!1;e.$message.success("编辑成功"),e.formMenu={brand_right:0},e.$router.push({path:"/menu"})}))}}))},updateMenuForm:function(){var e=this;console.log("上架"),this.$refs.menuForm.validate((function(t){if(t){e.formMenu.publishStatus=1,e.formMenu.fl=JSON.stringify(e.fl1),console.log(t);var n=JSON.stringify(e.formMenu),o={headers:{"Content-Type":"application/json;charset=UTF-8"}},l="/api/menu/updateMenu";e.$axios.post(l,n,o).then((function(t){if(200!==t.status)return console.log("error submit!!"),!1;e.$message.success("编辑成功"),e.formMenu={brand_right:0},e.$router.push({path:"/menu"})}))}}))}}}),a=r,i=n("2877"),u=Object(i["a"])(a,o,l,!1,null,"37179cd2",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-c6dad67e.efa0847e.js.map